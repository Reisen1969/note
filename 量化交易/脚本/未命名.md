获取 最近的k棒的 最低点

```

//@version=5

strategy("My Strategy with Dynamic Stop Loss", overlay=true, default_qty_type=strategy.cash, default_qty_value=10000, currency=currency.USD)

  

// 获取当前价格

currentPrice = close

  

// 查找符合条件的最低点

var float lowestValidLow = na

lookbackPeriod = 100  // 设定向后查找的最大周期数

for i = 1 to lookbackPeriod

    if (low[i] < currentPrice)

        lowestValidLow := low[i]

        break  // 找到后立即中断循环

  

// 如果找不到比当前价格低的最低点，使用当前价格的一个固定百分比作为默认值

if (na(lowestValidLow))

    lowestValidLow := currentPrice * 0.97

  

// 策略的其他部分

plot(lowestValidLow, color=color.red, title="Dynamic Stop Loss")

  

// 策略的买入、卖出逻辑

// 注意：确保将入场、出场逻辑完整地编写和测试

```
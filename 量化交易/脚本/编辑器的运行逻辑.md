


历史柱 : 左边的不会在变化的柱子
实时柱:  最右边的一根 K 柱


指标 和 策略 的执行模型

## 指标的运行模型
在每一根历史柱上运行一次脚本

实时柱每更新一次, 脚本执行一次, 每次执行 会回滚变量
![](../../assets/Pasted%20image%2020240529200352.png)


在实时柱中, close 表示当前的 实时价



## 策略的执行模型

策略在每根历史柱上也会交易一次, 和指标基本一样

金字塔式默认为1, 连续几次交易机会 只会 交易一次
![](../../assets/Pasted%20image%2020240529204018.png)

默认情况下 :
出现买入或者做空的信号之后, 会在下一根线的开盘去 操作
![](../../assets/Pasted%20image%2020240529204327.png)![](../../assets/Pasted%20image%2020240529204352.png)
设置这里 可以 在本K线立即操作
交易 是发生在当前柱 还是下根柱的开盘, 不会影响脚本的执行模型

策略默认没有在实时柱上去执行, 在实时柱关闭时, 会运行一次脚本



![](../../assets/Pasted%20image%2020240529204952.png)
每一笔订单完成后, 重新执行脚本
这个只会发生在 订单发生的这根K柱上, 不会延续到下一根

![](../../assets/Pasted%20image%2020240529205516.png)
![](../../assets/Pasted%20image%2020240529205621.png)


## 值

系列值. 每一条k线都有的一个值

比如 内置变量 close 等

函数调用的结果 也可以 用 []去引用